<!DOCTYPE html>
<html>
<head>
    <title>[#OFBIZ-5587] Error when add product to sales order</title>
    <meta http-equiv="Content-Type" Content="application/vnd.ms-word; charset=utf-8">
        <style type="text/css">

.tableBorder, .grid
{
    background-color: #fff;
    width: 100%;
    border-collapse: collapse;
}

.tableBorder td, .grid td
{
    vertical-align: top;
    padding: 2px;
    border: 1px solid #ccc;
}

.noPadding
{
    padding: 0 !important;
}

h3 .subText
{
    font-size: 60%;
    font-weight: normal;
}

.tabLabel
{
    font-weight: bold;
    border: 1px solid #ccc;
    border-bottom:none;
    padding: 2px;
    display: inline;
}

td.blank
{
    padding: 0;
    margin: 0;
}

.blank td
{
    border: none;
}

#descriptionArea
{
    margin: 0;
    padding: 2px;
    border: 1px solid #ccc;
}

hr
{
    border-top:1px solid #aaa;
}

hr.fullcontent
{
  height: 15px;
  padding: 10px 0;
  background: #fff url('https://issues.apache.org/jira/images/icons/hr.gif') no-repeat scroll center;
}

</style>

</head>
<body>

<table class="tableBorder" cellpadding="0" cellspacing="0" border="0" width="100%">
    <tr>
        <td bgcolor="#f0f0f0" width="100%" colspan="2" valign="top">
                            <h3 class="formtitle">
                        [OFBIZ-5587]&nbsp;<a href="https://issues.apache.org/jira/browse/OFBIZ-5587">Error when add product to sales order</a>
            <span class="subText">
               Created: 20/Mar/14                   &nbsp;Updated: 20/Mar/14

                                                    &nbsp;Resolved: 20/Mar/14
                            </span>
            </h3>
        </td>
    </tr>
    <tr>
        <td width="20%"><b>Status:</b></td>
        <td width="80%">Closed</td>
    </tr>
    <tr>
        <td width="20%"><b>Project:</b></td>
        <td width="80%"><a href="https://issues.apache.org/jira/secure/BrowseProject.jspa?id=12310500">OFBiz</a></td>
    </tr>

        <tr>
            <td><b>Component/s:</b></td>
            <td>
                                        <a title="order - The order component"
                href="https://issues.apache.org/jira/secure/IssueNavigator.jspa?reset=true&mode=hide&sorter/order=ASC&sorter/field=priority&pid=12310500&component=12311152"
            >order</a>                        </td>
    </tr>
    

        <tr>
            <td><b>Affects Version/s:</b></td>
            <td>
                            None
                </td>
    </tr>
    

        <tr>
            <td><b>Fix Version/s:</b></td>
            <td>
                            None
                </td>
    </tr>
    
    </table>

<br />
<table class="grid" cellpadding="0" cellspacing="0" border="0" width="100%">
    <tr>
        <td bgcolor="#f0f0f0" valign="top" width="20%">
            <b>Type:</b>
        </td>
        <td bgcolor="#ffffff" valign="top"  width="30%" >
            Bug
        </td>

                    <td bgcolor="#f0f0f0">
                <b>Priority:</b>
            </td>
            <td bgcolor="#ffffff" valign="top" nowrap>
                Major
            </td>
            </tr>
    <tr>
                        <td bgcolor="#f0f0f0" valign="top" width="20%">
                <b>Reporter:</b>
            </td>
            <td bgcolor="#ffffff" valign="top"  width="30%" >
                                            <a class="user-hover" rel="thangnguyen.Olbius" id="word_reporter_thangnguyen.Olbius" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thangnguyen.Olbius">nguyenthang</a>
                            </td>
        
                    <td bgcolor="#f0f0f0" width="20%">
                <b>Assignee:</b>
            </td>
            <td bgcolor="#ffffff" valign="top" nowrap  width="30%" >
                                            <a class="user-hover" rel="jacopoc" id="word_assignee_jacopoc" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jacopoc">Jacopo Cappellato</a>
                            </td>
            </tr>
    	<tr>
		<td bgcolor="#f0f0f0" width="20%">
			<b>Resolution:</b>
		</td>
		<td bgcolor="#ffffff" valign="top" width="30%" nowrap>
                            Not A Problem
                    </td>
                    <td bgcolor="#f0f0f0" width="20%">
                <b>Votes:</b>
            </td>
            <td bgcolor="#ffffff" valign="top" width="30%" nowrap>
                0
            </td>
        
    </tr>
    
        <tr>
        <td bgcolor="#f0f0f0" width="20%">
            <b>Labels:</b>
        </td>
        <td id="labels-12702536-value" class="value" bgcolor="#ffffff" valign="top" colspan="3" nowrap>
                            None
                    </td>
    </tr>
    
    	<tr>
        		<td bgcolor="#f0f0f0" width="20%"><b>Remaining Estimate:</b></td>
        <td bgcolor="#ffffff" valign="top" nowrap width="80%" colspan="3">
                            Not Specified
            		</td>
    </tr>
    <tr>
                <td bgcolor="#f0f0f0" width="20%"><b>Time Spent:</b></td>
		<td bgcolor="#ffffff" valign="top" nowrap width="80%" colspan="3">
                            Not Specified
            		</td>
	</tr>
    <tr>
                <td bgcolor="#f0f0f0" width="20%"><b>Original Estimate:</b></td>
		<td bgcolor="#ffffff" valign="top" nowrap width="80%" colspan="3">
                            Not Specified
            		</td>
    </tr>
    
    </table>



    <br />

    	<table class="grid" cellpadding="0" cellspacing="0" border="0" width="100%">
            

        
    



</table>

    <br/>

    <table cellpadding="2" cellspacing="0" border="0" width="100%" align="center">
    <tr>
        <td bgcolor="#bbbbbb" width="1%" nowrap align="center">
            &nbsp;<font color="#ffffff"><b>Description</b></font>&nbsp;
        </td>
        <td>&nbsp;</td>
    </tr>
    </table>

    <table cellpadding="0" cellspacing="0" border="0" width="100%">
    <tr>
        <td id="descriptionArea">
            <p>Error appear when add a product to sales order:<br/>
In form Order Items:</p>

<p>Method public java.util.List org.ofbiz.entity.GenericValue.getRelated(java.lang.String,java.util.Map,java.util.List,boolean) throws org.ofbiz.entity.GenericEntityException threw an exception when invoked on <span class="error">&#91;GenericEntity:Product&#93;</span><span class="error">&#91;amountUomTypeId,null()&#93;</span><span class="error">&#91;autoCreateKeywords,null()&#93;</span><span class="error">&#91;billOfMaterialLevel,0(java.lang.Long)&#93;</span><span class="error">&#91;brandName,null()&#93;</span><span class="error">&#91;chargeShipping,null()&#93;</span><span class="error">&#91;comments,null()&#93;</span><span class="error">&#91;configId,null()&#93;</span><span class="error">&#91;createdByUserLogin,admin(java.lang.String)&#93;</span><span class="error">&#91;createdDate,2014-03-13 11:32:21.0(java.sql.Timestamp)&#93;</span><span class="error">&#91;createdStamp,2014-03-13 11:32:21.0(java.sql.Timestamp)&#93;</span><span class="error">&#91;createdTxStamp,2014-03-13 11:32:21.0(java.sql.Timestamp)&#93;</span><span class="error">&#91;defaultShipmentBoxTypeId,null()&#93;</span><span class="error">&#91;depthUomId,null()&#93;</span><span class="error">&#91;description,null()&#93;</span><span class="error">&#91;detailImageUrl,null()&#93;</span><span class="error">&#91;detailScreen,null()&#93;</span><span class="error">&#91;diameterUomId,null()&#93;</span><span class="error">&#91;facilityId,null()&#93;</span><span class="error">&#91;fixedAmount,null()&#93;</span><span class="error">&#91;heightUomId,null()&#93;</span><span class="error">&#91;inShippingBox,N(java.lang.String)&#93;</span><span class="error">&#91;includeInPromotions,null()&#93;</span><span class="error">&#91;internalName,olbiusProduct(java.lang.String)&#93;</span><span class="error">&#91;introductionDate,null()&#93;</span><span class="error">&#91;inventoryMessage,null()&#93;</span><span class="error">&#91;isVariant,N(java.lang.String)&#93;</span><span class="error">&#91;isVirtual,N(java.lang.String)&#93;</span><span class="error">&#91;largeImageUrl,null()&#93;</span><span class="error">&#91;lastModifiedByUserLogin,admin(java.lang.String)&#93;</span><span class="error">&#91;lastModifiedDate,2014-03-13 14:23:48.0(java.sql.Timestamp)&#93;</span><span class="error">&#91;lastUpdatedStamp,2014-03-13 14:23:48.0(java.sql.Timestamp)&#93;</span><span class="error">&#91;lastUpdatedTxStamp,2014-03-13 14:23:48.0(java.sql.Timestamp)&#93;</span><span class="error">&#91;longDescription,null()&#93;</span><span class="error">&#91;lotIdFilledIn,Allowed(java.lang.String)&#93;</span><span class="error">&#91;manufacturerPartyId,null()&#93;</span><span class="error">&#91;mediumImageUrl,null()&#93;</span><span class="error">&#91;orderDecimalQuantity,null()&#93;</span><span class="error">&#91;originGeoId,null()&#93;</span><span class="error">&#91;originalImageUrl,null()&#93;</span><span class="error">&#91;piecesIncluded,null()&#93;</span><span class="error">&#91;priceDetailText,null()&#93;</span><span class="error">&#91;primaryProductCategoryId,null()&#93;</span><span class="error">&#91;productDepth,null()&#93;</span><span class="error">&#91;productDiameter,null()&#93;</span><span class="error">&#91;productHeight,null()&#93;</span><span class="error">&#91;productId,olbiusTestProduct(java.lang.String)&#93;</span><span class="error">&#91;productName,null()&#93;</span><span class="error">&#91;productRating,3.000000(java.math.BigDecimal)&#93;</span><span class="error">&#91;productTypeId,FINISHED_GOOD(java.lang.String)&#93;</span><span class="error">&#91;productWeight,null()&#93;</span><span class="error">&#91;productWidth,null()&#93;</span><span class="error">&#91;quantityIncluded,null()&#93;</span><span class="error">&#91;quantityUomId,null()&#93;</span><span class="error">&#91;ratingTypeEnum,PRDR_MAX(java.lang.String)&#93;</span><span class="error">&#91;releaseDate,null()&#93;</span><span class="error">&#91;requireAmount,null()&#93;</span><span class="error">&#91;requireInventory,null()&#93;</span><span class="error">&#91;requirementMethodEnumId,null()&#93;</span><span class="error">&#91;reserv2ndPPPerc,null()&#93;</span><span class="error">&#91;reservMaxPersons,null()&#93;</span><span class="error">&#91;reservNthPPPerc,null()&#93;</span><span class="error">&#91;returnable,null()&#93;</span><span class="error">&#91;salesDiscWhenNotAvail,null()&#93;</span><span class="error">&#91;salesDiscontinuationDate,null()&#93;</span><span class="error">&#91;shippingDepth,null()&#93;</span><span class="error">&#91;shippingHeight,null()&#93;</span><span class="error">&#91;shippingWidth,null()&#93;</span><span class="error">&#91;smallImageUrl,null()&#93;</span><span class="error">&#91;supportDiscontinuationDate,null()&#93;</span><span class="error">&#91;taxable,null()&#93;</span><span class="error">&#91;virtualVariantMethodEnum,null()&#93;</span><span class="error">&#91;weight,null()&#93;</span><span class="error">&#91;weightUomId,null()&#93;</span><span class="error">&#91;widthUomId,null()&#93;</span> with arguments of types <span class="error">&#91;java.lang.String,null,java.util.LinkedList,java.lang.Boolean,&#93;</span> The problematic instruction: ---------- ==&gt; assignment: itemProductAssocList=cartLine.getProduct().getRelated("MainProductAssoc", null, Static<span class="error">&#91;&quot;org.ofbiz.base.util.UtilMisc&quot;&#93;</span>.toList("productAssocTypeId", "sequenceNum"), false)?if_exists <span class="error">&#91;on line 222, column 15 in component://order/webapp/ordermgr/entry/cart/showcartitems.ftl&#93;</span> ---------- Java backtrace for programmers: ---------- freemarker.template.TemplateModelException: Method public java.util.List org.ofbiz.entity.GenericValue.getRelated(java.lang.String,java.util.Map,java.util.List,boolean) throws org.ofbiz.entity.GenericEntityException threw an exception when invoked on <span class="error">&#91;GenericEntity:Product&#93;</span><span class="error">&#91;amountUomTypeId,null()&#93;</span><span class="error">&#91;autoCreateKeywords,null()&#93;</span><span class="error">&#91;billOfMaterialLevel,0(java.lang.Long)&#93;</span><span class="error">&#91;brandName,null()&#93;</span><span class="error">&#91;chargeShipping,null()&#93;</span><span class="error">&#91;comments,null()&#93;</span><span class="error">&#91;configId,null()&#93;</span><span class="error">&#91;createdByUserLogin,admin(java.lang.String)&#93;</span><span class="error">&#91;createdDate,2014-03-13 11:32:21.0(java.sql.Timestamp)&#93;</span><span class="error">&#91;createdStamp,2014-03-13 11:32:21.0(java.sql.Timestamp)&#93;</span><span class="error">&#91;createdTxStamp,2014-03-13 11:32:21.0(java.sql.Timestamp)&#93;</span><span class="error">&#91;defaultShipmentBoxTypeId,null()&#93;</span><span class="error">&#91;depthUomId,null()&#93;</span><span class="error">&#91;description,null()&#93;</span><span class="error">&#91;detailImageUrl,null()&#93;</span><span class="error">&#91;detailScreen,null()&#93;</span><span class="error">&#91;diameterUomId,null()&#93;</span><span class="error">&#91;facilityId,null()&#93;</span><span class="error">&#91;fixedAmount,null()&#93;</span><span class="error">&#91;heightUomId,null()&#93;</span><span class="error">&#91;inShippingBox,N(java.lang.String)&#93;</span><span class="error">&#91;includeInPromotions,null()&#93;</span><span class="error">&#91;internalName,olbiusProduct(java.lang.String)&#93;</span><span class="error">&#91;introductionDate,null()&#93;</span><span class="error">&#91;inventoryMessage,null()&#93;</span><span class="error">&#91;isVariant,N(java.lang.String)&#93;</span><span class="error">&#91;isVirtual,N(java.lang.String)&#93;</span><span class="error">&#91;largeImageUrl,null()&#93;</span><span class="error">&#91;lastModifiedByUserLogin,admin(java.lang.String)&#93;</span><span class="error">&#91;lastModifiedDate,2014-03-13 14:23:48.0(java.sql.Timestamp)&#93;</span><span class="error">&#91;lastUpdatedStamp,2014-03-13 14:23:48.0(java.sql.Timestamp)&#93;</span><span class="error">&#91;lastUpdatedTxStamp,2014-03-13 14:23:48.0(java.sql.Timestamp)&#93;</span><span class="error">&#91;longDescription,null()&#93;</span><span class="error">&#91;lotIdFilledIn,Allowed(java.lang.String)&#93;</span><span class="error">&#91;manufacturerPartyId,null()&#93;</span><span class="error">&#91;mediumImageUrl,null()&#93;</span><span class="error">&#91;orderDecimalQuantity,null()&#93;</span><span class="error">&#91;originGeoId,null()&#93;</span><span class="error">&#91;originalImageUrl,null()&#93;</span><span class="error">&#91;piecesIncluded,null()&#93;</span><span class="error">&#91;priceDetailText,null()&#93;</span><span class="error">&#91;primaryProductCategoryId,null()&#93;</span><span class="error">&#91;productDepth,null()&#93;</span><span class="error">&#91;productDiameter,null()&#93;</span><span class="error">&#91;productHeight,null()&#93;</span><span class="error">&#91;productId,olbiusTestProduct(java.lang.String)&#93;</span><span class="error">&#91;productName,null()&#93;</span><span class="error">&#91;productRating,3.000000(java.math.BigDecimal)&#93;</span><span class="error">&#91;productTypeId,FINISHED_GOOD(java.lang.String)&#93;</span><span class="error">&#91;productWeight,null()&#93;</span><span class="error">&#91;productWidth,null()&#93;</span><span class="error">&#91;quantityIncluded,null()&#93;</span><span class="error">&#91;quantityUomId,null()&#93;</span><span class="error">&#91;ratingTypeEnum,PRDR_MAX(java.lang.String)&#93;</span><span class="error">&#91;releaseDate,null()&#93;</span><span class="error">&#91;requireAmount,null()&#93;</span><span class="error">&#91;requireInventory,null()&#93;</span><span class="error">&#91;requirementMethodEnumId,null()&#93;</span><span class="error">&#91;reserv2ndPPPerc,null()&#93;</span><span class="error">&#91;reservMaxPersons,null()&#93;</span><span class="error">&#91;reservNthPPPerc,null()&#93;</span><span class="error">&#91;returnable,null()&#93;</span><span class="error">&#91;salesDiscWhenNotAvail,null()&#93;</span><span class="error">&#91;salesDiscontinuationDate,null()&#93;</span><span class="error">&#91;shippingDepth,null()&#93;</span><span class="error">&#91;shippingHeight,null()&#93;</span><span class="error">&#91;shippingWidth,null()&#93;</span><span class="error">&#91;smallImageUrl,null()&#93;</span><span class="error">&#91;supportDiscontinuationDate,null()&#93;</span><span class="error">&#91;taxable,null()&#93;</span><span class="error">&#91;virtualVariantMethodEnum,null()&#93;</span><span class="error">&#91;weight,null()&#93;</span><span class="error">&#91;weightUomId,null()&#93;</span><span class="error">&#91;widthUomId,null()&#93;</span> with arguments of types <span class="error">&#91;java.lang.String,null,java.util.LinkedList,java.lang.Boolean,&#93;</span> at freemarker.ext.beans.OverloadedMethodModel.exec(OverloadedMethodModel.java:134) at freemarker.core.MethodCall._getAsTemplateModel(MethodCall.java:93) at freemarker.core.Expression.getAsTemplateModel(Expression.java:89) at freemarker.core.BuiltIn$if_existsBI._getAsTemplateModel(BuiltIn.java:751) at freemarker.core.Expression.getAsTemplateModel(Expression.java:89) at freemarker.core.Assignment.accept(Assignment.java:90) at freemarker.core.Environment.visit(Environment.java:221) at freemarker.core.ConditionalBlock.accept(ConditionalBlock.java:79) at freemarker.core.Environment.visit(Environment.java:221) at freemarker.core.MixedContent.accept(MixedContent.java:92) at freemarker.core.Environment.visit(Environment.java:221) at freemarker.core.IteratorBlock$Context.runLoop(IteratorBlock.java:167) at freemarker.core.Environment.visit(Environment.java:428) at freemarker.core.IteratorBlock.accept(IteratorBlock.java:102) at freemarker.core.Environment.visit(Environment.java:221) at freemarker.core.MixedContent.accept(MixedContent.java:92) at freemarker.core.Environment.visit(Environment.java:221) at freemarker.core.IfBlock.accept(IfBlock.java:82) at freemarker.core.Environment.visit(Environment.java:221) at freemarker.core.MixedContent.accept(MixedContent.java:92) at freemarker.core.Environment.visit(Environment.java:221) at freemarker.core.Environment.process(Environment.java:199) at org.ofbiz.base.util.template.FreeMarkerWorker.renderTemplate(FreeMarkerWorker.java:251) at org.ofbiz.widget.screen.HtmlWidget.renderHtmlTemplate(HtmlWidget.java:224) at org.ofbiz.widget.screen.HtmlWidget$HtmlTemplate.renderWidgetString(HtmlWidget.java:269) at org.ofbiz.widget.screen.HtmlWidget.renderWidgetString(HtmlWidget.java:129) at org.ofbiz.widget.screen.ModelScreenWidget$PlatformSpecific.renderWidgetString(ModelScreenWidget.java:1004) at org.ofbiz.widget.screen.ModelScreenWidget.renderSubWidgetsString(ModelScreenWidget.java:108) at org.ofbiz.widget.screen.ModelScreenWidget$DecoratorSection.renderWidgetString(ModelScreenWidget.java:702) at org.ofbiz.widget.screen.ModelScreenWidget$SectionsRenderer.render(ModelScreenWidget.java:133) at org.ofbiz.widget.screen.ModelScreenWidget$DecoratorSectionInclude.renderWidgetString(ModelScreenWidget.java:735) at org.ofbiz.widget.screen.ModelScreenWidget.renderSubWidgetsString(ModelScreenWidget.java:108) at org.ofbiz.widget.screen.ModelScreenWidget$Section.renderWidgetString(ModelScreenWidget.java:195) at org.ofbiz.widget.screen.ModelScreenWidget.renderSubWidgetsString(ModelScreenWidget.java:108) at org.ofbiz.widget.screen.ModelScreenWidget$DecoratorSection.renderWidgetString(ModelScreenWidget.java:702) at org.ofbiz.widget.screen.ModelScreenWidget$SectionsRenderer.render(ModelScreenWidget.java:133) at org.ofbiz.widget.screen.ModelScreenWidget$DecoratorSectionInclude.renderWidgetString(ModelScreenWidget.java:735) at org.ofbiz.widget.screen.ModelScreenWidget.renderSubWidgetsString(ModelScreenWidget.java:108) at org.ofbiz.widget.screen.ModelScreenWidget$Container.renderWidgetString(ModelScreenWidget.java:337) at org.ofbiz.widget.screen.ModelScreenWidget.renderSubWidgetsString(ModelScreenWidget.java:108) at org.ofbiz.widget.screen.ModelScreenWidget$Container.renderWidgetString(ModelScreenWidget.java:337) at org.ofbiz.widget.screen.ModelScreenWidget.renderSubWidgetsString(ModelScreenWidget.java:108) at org.ofbiz.widget.screen.ModelScreenWidget$Section.renderWidgetString(ModelScreenWidget.java:195) at org.ofbiz.widget.screen.ModelScreenWidget.renderSubWidgetsString(ModelScreenWidget.java:108) at org.ofbiz.widget.screen.ModelScreenWidget$Section.renderWidgetString(ModelScreenWidget.java:195) at org.ofbiz.widget.screen.ModelScreen.renderScreenString(ModelScreen.java:396) at org.ofbiz.widget.screen.ScreenFactory.renderReferencedScreen(ScreenFactory.java:216) at org.ofbiz.widget.screen.ModelScreenWidget$IncludeScreen.renderWidgetString(ModelScreenWidget.java:602) at org.ofbiz.widget.screen.ModelScreenWidget.renderSubWidgetsString(ModelScreenWidget.java:108) at org.ofbiz.widget.screen.ModelScreenWidget$Section.renderWidgetString(ModelScreenWidget.java:195) at org.ofbiz.widget.screen.ModelScreen.renderScreenString(ModelScreen.java:396) at org.ofbiz.widget.screen.ScreenFactory.renderReferencedScreen(ScreenFactory.java:216) at org.ofbiz.widget.screen.ModelScreenWidget$IncludeScreen.renderWidgetString(ModelScreenWidget.java:602) at org.ofbiz.widget.screen.ModelScreenWidget.renderSubWidgetsString(ModelScreenWidget.java:108) at org.ofbiz.widget.screen.ModelScreenWidget$Section.renderWidgetString(ModelScreenWidget.java:195) at org.ofbiz.widget.screen.ModelScreen.renderScreenString(ModelScreen.java:396) at org.ofbiz.widget.screen.ScreenFactory.renderReferencedScreen(ScreenFactory.java:216) at org.ofbiz.widget.screen.ModelScreenWidget$DecoratorScreen.renderWidgetString(ModelScreenWidget.java:669) at org.ofbiz.widget.screen.ModelScreenWidget.renderSubWidgetsString(ModelScreenWidget.java:108) at org.ofbiz.widget.screen.ModelScreenWidget$Section.renderWidgetString(ModelScreenWidget.java:195) at org.ofbiz.widget.screen.ModelScreen.renderScreenString(ModelScreen.java:396) at org.ofbiz.widget.screen.ScreenFactory.renderReferencedScreen(ScreenFactory.java:216) at org.ofbiz.widget.screen.ModelScreenWidget$DecoratorScreen.renderWidgetString(ModelScreenWidget.java:669) at org.ofbiz.widget.screen.ModelScreenWidget.renderSubWidgetsString(ModelScreenWidget.java:108) at org.ofbiz.widget.screen.ModelScreenWidget$Section.renderWidgetString(ModelScreenWidget.java:195) at org.ofbiz.widget.screen.ModelScreen.renderScreenString(ModelScreen.java:396) at org.ofbiz.widget.screen.ScreenRenderer.render(ScreenRenderer.java:135) at org.ofbiz.widget.screen.ScreenRenderer.render(ScreenRenderer.java:97) at org.ofbiz.widget.screen.MacroScreenViewHandler.render(MacroScreenViewHandler.java:104) at org.ofbiz.webapp.control.RequestHandler.renderView(RequestHandler.java:978) at org.ofbiz.webapp.control.RequestHandler.doRequest(RequestHandler.java:679) at org.ofbiz.webapp.control.RequestHandler.doRequest(RequestHandler.java:639) at org.ofbiz.webapp.control.ControlServlet.doGet(ControlServlet.java:214) at org.ofbiz.webapp.control.ControlServlet.doPost(ControlServlet.java:86) at javax.servlet.http.HttpServlet.service(HttpServlet.java:641) at javax.servlet.http.HttpServlet.service(HttpServlet.java:722) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at org.ofbiz.webapp.control.ContextFilter.doFilter(ContextFilter.java:314) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123) at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:953) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408) at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1023) at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) at java.lang.Thread.run(Thread.java:744) Caused by: org.ofbiz.entity.transaction.GenericTransactionException: The current transaction is marked for rollback, not beginning a new transaction and aborting current operation; the rollbackOnly was caused by: Error in simple-method [Is Store Inventory Available <a href="file:/home/nguyenthang/Documents/work/DEV/OlbiusOFBiz/ofbiz_src/applications/product/script/org/ofbiz/product/store/ProductStoreServices.xml#isStoreInventoryAvailable" class="external-link" rel="nofollow">file:/home/nguyenthang/Documents/work/DEV/OlbiusOFBiz/ofbiz_src/applications/product/script/org/ofbiz/product/store/ProductStoreServices.xml#isStoreInventoryAvailable</a>]: ; <span class="error">&#91;ProductStore with id has Y for oneInventoryFacility but inventoryFacilityId is empty, not checking available inventory.&#93;</span> at org.ofbiz.entity.transaction.TransactionUtil.begin(TransactionUtil.java:156) at org.ofbiz.entity.transaction.TransactionUtil.begin(TransactionUtil.java:124) at org.ofbiz.entity.GenericDelegator.findList(GenericDelegator.java:1791) at org.ofbiz.entity.GenericDelegator.findByAnd(GenericDelegator.java:1729) at org.ofbiz.entity.GenericDelegator.getRelated(GenericDelegator.java:1964) at org.ofbiz.entity.GenericValue.getRelated(GenericValue.java:146) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:606) at freemarker.ext.beans.BeansWrapper.invokeMethod(BeansWrapper.java:888) at freemarker.ext.beans.OverloadedMethodModel.exec(OverloadedMethodModel.java:104) ... 94 more</p>
            <br/>
        </td>
    </tr>
    </table>

    <br/>

    <table cellpadding="2" cellspacing="0" border="0" width="100%" align="center">
    <tr>
        <td bgcolor="#bbbbbb" width="1%" nowrap align="center">
            &nbsp;<font color="#ffffff"><b>Comments</b></font>&nbsp;
        </td>
        <td>&nbsp;</td>
    </tr>
    </table>

    <table cellpadding="0" cellspacing="0" border="0" width="100%" class="grid" style="margin: 0;">
                <tr id="comment-header-13941429"><td bgcolor="#f0f0f0">
            Comment by  
                                                        <a class="user-hover" rel="jacopoc" id="word_commented_jacopoc" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jacopoc">Jacopo Cappellato</a>
                                        <font size="-2">
            [
                <font color="#336699">20/Mar/14</font>

                            ]
            </font>

        </td></tr>
        <tr id="comment-body-13941429"><td bgcolor="#ffffff">
            <p>This is not a bug but a configuration issue.<br/>
The cause of the error is explained by this sentence (difficult to find because it is buried in the huge and ugly stack trace that OFBiz generates):</p>

<p>"ProductStore with id has Y for oneInventoryFacility but inventoryFacilityId is empty, not checking available inventory"</p>

<p>This means that when you have setup your product store you didn't specify a facility id (the warehouse where the inventory is located).</p>
        </td></tr>
                <tr id="comment-header-13941481"><td bgcolor="#f0f0f0">
            Comment by  
                                                        <a class="user-hover" rel="thangnguyen.Olbius" id="word_commented_thangnguyen.Olbius" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thangnguyen.Olbius">nguyenthang</a>
                                        <font size="-2">
            [
                <font color="#336699">20/Mar/14</font>

                            ]
            </font>

        </td></tr>
        <tr id="comment-body-13941481"><td bgcolor="#ffffff">
            <p>thanks Jacopo! <br/>
It work! <br/>
But I think we should create a message to inform this error for clearer and not confuse like that.<br/>
If you're interested in with this problem, discussed with us in this thread: <a href="http://ofbiz.135035.n4.nabble.com/Discussion-How-to-customize-messages-in-ofbiz-td4649370.html" class="external-link" rel="nofollow">http://ofbiz.135035.n4.nabble.com/Discussion-How-to-customize-messages-in-ofbiz-td4649370.html</a></p>
        </td></tr>
                <tr id="comment-header-13941502"><td bgcolor="#f0f0f0">
            Comment by  
                                                        <a class="user-hover" rel="jacopoc" id="word_commented_jacopoc" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jacopoc">Jacopo Cappellato</a>
                                        <font size="-2">
            [
                <font color="#336699">20/Mar/14</font>

                            ]
            </font>

        </td></tr>
        <tr id="comment-body-13941502"><td bgcolor="#ffffff">
            <p>Thanks for the confirmation!<br/>
I agree that the "edit product store" screen (but this is true with several other screens) should be enhanced to provide more information about the fields being edited, including warning messages about missing information that could be relevant if you need some of the workflows.</p>
        </td></tr>
                <tr id="comment-header-13941515"><td bgcolor="#f0f0f0">
            Comment by  
                                                        <a class="user-hover" rel="jacques.le.roux" id="word_commented_jacques.le.roux" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jacques.le.roux">Jacques Le Roux</a>
                                        <font size="-2">
            [
                <font color="#336699">20/Mar/14</font>

                            ]
            </font>

        </td></tr>
        <tr id="comment-body-13941515"><td bgcolor="#ffffff">
            <p>Thang,</p>

<p>Maybe you could create a new Improvement Jira issue with the requirements from what you spotted like here?</p>
        </td></tr>
                <tr id="comment-header-13941525"><td bgcolor="#f0f0f0">
            Comment by  
                                                        <a class="user-hover" rel="rongnk" id="word_commented_rongnk" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rongnk">Rong Nguyen</a>
                                        <font size="-2">
            [
                <font color="#336699">20/Mar/14</font>

                            ]
            </font>

        </td></tr>
        <tr id="comment-body-13941525"><td bgcolor="#ffffff">
            <p>Hi Jacques,<br/>
He has been posted before: <a href="https://issues.apache.org/jira/browse/OFBIZ-5582" class="external-link" rel="nofollow">https://issues.apache.org/jira/browse/OFBIZ-5582</a><br/>
End user can not understand technical exceptions(sql exception, java exception,..), can anyone create a wiki about the way to display message(ftl, groove, java, service, minilang) when an error occur or is there any suggestions to solve it by easiest way?</p>
        </td></tr>
                <tr id="comment-header-13941566"><td bgcolor="#f0f0f0">
            Comment by  
                                                        <a class="user-hover" rel="jacques.le.roux" id="word_commented_jacques.le.roux" href="https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jacques.le.roux">Jacques Le Roux</a>
                                        <font size="-2">
            [
                <font color="#336699">20/Mar/14</font>

                            ]
            </font>

        </td></tr>
        <tr id="comment-body-13941566"><td bgcolor="#ffffff">
            <p>OK, got It, I will answer with more details on dev ML when I will get a chance. To begin have a look at framework/common/webcommon/includes/messages.ftl</p>
        </td></tr>
            </table>
Generated at Sat Mar 22 13:33:14 UTC 2014 using JIRA 6.2#6252-sha1:aa343257d4ce030d9cb8c531be520be9fac1c996.

</body>
</html>